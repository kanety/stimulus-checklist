{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["import { Controller } from '@hotwired/stimulus';\nimport '@kanety/stimulus-static-actions';\nimport './index.scss';\n\nexport default class extends Controller {\n  static values = {\n    filter: { type: String, default: 'input[type=checkbox]' }\n  };\n  static actions = [\n    ['element', 'click->check'],\n    ['element', 'mousedown->disableUS'],\n    ['element', 'mouseup->enableUS'],\n    ['element', 'userselect->preventUS']\n  ];\n\n  get items() {\n    return Array.from(this.element.children);\n  }\n\n  get checkboxes() {\n    return this.scope.findAllElements(this.filterValue).filter(cb => !cb.disabled);\n  }\n\n  check(e) {\n    if (e.target.matches('input, select, textarea')) return;\n\n    let item = e.target;\n    while (item && item.parentNode != this.element) item = item.parentNode;\n\n    if (item) {\n      this.update(item, e.shiftKey, e.ctrlKey);\n    }\n  }\n\n  update(item, shift = false, ctrl = false) {\n    let curr = this.current;\n\n    if (shift && curr) {\n      this.uncheckAll();\n      this.checkBetween(curr, item);\n    } else if (ctrl) {\n      this.checkToggle(item);\n    } else {\n      this.uncheckAll();\n      this.checkItem(item);\n      this.current = item;\n    }\n  }\n\n  uncheckAll() {\n    this.checkboxes.forEach(cb => cb.checked = false);\n  }\n\n  checkItem(item) {\n    let cb = this.checkboxAt(item);\n    if (cb) cb.checked = true;\n  }\n\n  checkToggle(item) {\n    let cb = this.checkboxAt(item);\n    if (cb) cb.checked = !cb.checked;\n  }\n\n  checkBetween(item1, item2) {\n    let items = this.items;\n    let n1 = items.indexOf(item1);\n    let n2 = items.indexOf(item2);\n\n    if (n1 > n2) {\n      [n1, n2] = [n2, n1];\n    }\n\n    items.slice(n1, n2 + 1).forEach(item => {\n      let cb = this.checkboxAt(item);\n      if (cb) cb.checked = true;\n    });\n  }\n\n  checkboxAt(item) {\n    let cb = item.querySelector(this.filterValue);\n    return !cb.disabled ? cb : null;\n  }\n\n  disableUS(e) {\n    if (e.ctrlKey || e.shiftKey) {\n      this.toggleUS(false);\n    }\n  }\n\n  enableUS(e) {\n    if (e.ctrlKey || e.shiftKey) {\n      this.toggleUS(true);\n    }\n  }\n\n  toggleUS(enable) {\n    this.disableUserSelect = !enable;\n    if (enable) {\n      this.element.classList.remove('st-checklist--disable-us');\n    } else {\n      this.element.classList.add('st-checklist--disable-us');\n    }\n  }\n\n  preventUS(e) {\n    if (this.disableUserSelect) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n}\n"],"names":["Controller","items","Array","from","this","element","children","checkboxes","scope","findAllElements","filterValue","filter","cb","disabled","check","e","target","matches","item","parentNode","update","shiftKey","ctrlKey","shift","ctrl","curr","current","uncheckAll","checkBetween","checkToggle","checkItem","forEach","checked","checkboxAt","item1","item2","n1","indexOf","n2","slice","querySelector","disableUS","toggleUS","enableUS","enable","disableUserSelect","classList","remove","add","preventUS","values","type","String","default","actions"],"mappings":"gYAI6BA,aAWvBC,YACF,OAAOC,MAAMC,KAAKC,KAAKC,QAAQC,UAG7BC,iBACF,YAAYC,MAAMC,gBAAgBL,KAAKM,aAAaC,OAAOC,IAAOA,EAAGC,UAGvEC,MAAMC,GACJ,IAAIA,EAAEC,OAAOC,QAAQ,2BAArB,CAGA,IADA,IAAIC,EAAOH,EAAEC,OACNE,GAAQA,EAAKC,YAAcf,KAAKC,SAASa,EAAOA,EAAKC,WAExDD,GACFd,KAAKgB,OAAOF,EAAMH,EAAEM,SAAUN,EAAEO,UAIpCF,OAAOF,EAAMK,EAAeC,YAAfD,IAAAA,GAAQ,YAAOC,IAAAA,GAAO,GACjC,IAAIC,EAAOrB,KAAKsB,QAEZH,GAASE,GACXrB,KAAKuB,aACLvB,KAAKwB,aAAaH,EAAMP,IACfM,EACTpB,KAAKyB,YAAYX,IAEjBd,KAAKuB,aACLvB,KAAK0B,UAAUZ,GACfd,KAAKsB,QAAUR,GAInBS,aACEvB,KAAKG,WAAWwB,QAAQnB,GAAMA,EAAGoB,SAAU,GAG7CF,UAAUZ,GACR,IAAIN,EAAKR,KAAK6B,WAAWf,GACrBN,IAAIA,EAAGoB,SAAU,GAGvBH,YAAYX,GACV,IAAIN,EAAKR,KAAK6B,WAAWf,GACrBN,IAAIA,EAAGoB,SAAWpB,EAAGoB,SAG3BJ,aAAaM,EAAOC,GAClB,IAAIlC,EAAQG,KAAKH,MACbmC,EAAKnC,EAAMoC,QAAQH,GACnBI,EAAKrC,EAAMoC,QAAQF,GAEnBC,EAAKE,KACNF,EAAIE,GAAM,CAACA,EAAIF,IAGlBnC,EAAMsC,MAAMH,EAAIE,EAAK,GAAGP,QAAQb,IAC9B,IAAIN,EAAKR,KAAK6B,WAAWf,GACrBN,IAAIA,EAAGoB,SAAU,KAIzBC,WAAWf,GACT,IAAIN,EAAKM,EAAKsB,cAAcpC,KAAKM,aACjC,OAAQE,EAAGC,SAAgB,KAALD,EAGxB6B,UAAU1B,IACJA,EAAEO,SAAWP,EAAEM,WACjBjB,KAAKsC,UAAS,GAIlBC,SAAS5B,IACHA,EAAEO,SAAWP,EAAEM,WACjBjB,KAAKsC,UAAS,GAIlBA,SAASE,GACPxC,KAAKyC,mBAAqBD,EACtBA,EACFxC,KAAKC,QAAQyC,UAAUC,OAAO,4BAE9B3C,KAAKC,QAAQyC,UAAUE,IAAI,4BAI/BC,UAAUlC,GACR,OAAIX,KAAKyC,4BApGJK,OAAS,CACdvC,OAAQ,CAAEwC,KAAMC,OAAQC,QAAS,2BAE5BC,QAAU,CACf,CAAC,UAAW,gBACZ,CAAC,UAAW,wBACZ,CAAC,UAAW,qBACZ,CAAC,UAAW"}